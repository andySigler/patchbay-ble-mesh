{"ast":null,"code":"var _jsxFileName = \"/Users/andy/Documents/github/patchbay-ble-mesh/react/src/App.js\";\nimport React from 'react';\nimport './App.css';\nimport { userEventTypes, makeTestingNodes } from './modules/PatchbayUtils';\nimport { Patchbay } from './modules/Patchbay'; // TODO: get screen values from React-Native methods when on mobile\n\nconst screenTestScaler = 0.8;\nconst canvasWidth = Math.floor(736 * screenTestScaler);\nconst canvasHeight = Math.floor(414 * screenTestScaler);\n\nclass App extends React.Component {\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 15\n      },\n      __self: this\n    }, React.createElement(Animation, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 16\n      },\n      __self: this\n    }));\n  }\n\n}\n\nclass Animation extends React.Component {\n  constructor(props) {\n    super(props);\n    this.canvasRef = React.createRef();\n    this.patchbay = undefined;\n  }\n\n  componentDidMount() {\n    const canvas = this.canvasRef.current;\n    canvas.width = canvasWidth;\n    canvas.height = canvasHeight;\n    this.patchbay = new Patchbay(canvas.getContext('2d'));\n    this.patchbay.setSize(canvas.width, canvas.height);\n    makeTestingNodes(this.patchbay);\n    this.patchbay.drawLoop();\n  }\n\n  handleUserEvent(event, type) {\n    if (this.patchbay) {\n      this.patchbay.handleUserEvent(type, event.clientX, event.clientY);\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46\n      },\n      __self: this\n    }, React.createElement(\"canvas\", {\n      ref: this.canvasRef // TODO: these events will need to change for when in React-Native\n      ,\n      onMouseDown: event => this.handleUserEvent(event, userEventTypes.touch),\n      onMouseMove: event => this.handleUserEvent(event, userEventTypes.move),\n      onMouseLeave: event => this.handleUserEvent(event, userEventTypes.release),\n      onMouseUp: event => this.handleUserEvent(event, userEventTypes.release),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/andy/Documents/github/patchbay-ble-mesh/react/src/App.js"],"names":["React","userEventTypes","makeTestingNodes","Patchbay","screenTestScaler","canvasWidth","Math","floor","canvasHeight","App","Component","render","Animation","constructor","props","canvasRef","createRef","patchbay","undefined","componentDidMount","canvas","current","width","height","getContext","setSize","drawLoop","handleUserEvent","event","type","clientX","clientY","touch","move","release"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,WAAP;AAEA,SAASC,cAAT,EAAyBC,gBAAzB,QAAiD,yBAAjD;AACA,SAASC,QAAT,QAAyB,oBAAzB,C,CAEA;;AACA,MAAMC,gBAAgB,GAAG,GAAzB;AACA,MAAMC,WAAW,GAAGC,IAAI,CAACC,KAAL,CAAW,MAAMH,gBAAjB,CAApB;AACA,MAAMI,YAAY,GAAGF,IAAI,CAACC,KAAL,CAAW,MAAMH,gBAAjB,CAArB;;AAGA,MAAMK,GAAN,SAAkBT,KAAK,CAACU,SAAxB,CAAkC;AAChCC,EAAAA,MAAM,GAAG;AACP,WAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACL,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADK,CAAP;AAGD;;AAL+B;;AAQlC,MAAMC,SAAN,SAAwBZ,KAAK,CAACU,SAA9B,CAAwC;AACtCG,EAAAA,WAAW,CAAEC,KAAF,EAAS;AAClB,UAAMA,KAAN;AACA,SAAKC,SAAL,GAAiBf,KAAK,CAACgB,SAAN,EAAjB;AACA,SAAKC,QAAL,GAAgBC,SAAhB;AACD;;AAEDC,EAAAA,iBAAiB,GAAI;AACnB,UAAMC,MAAM,GAAG,KAAKL,SAAL,CAAeM,OAA9B;AACAD,IAAAA,MAAM,CAACE,KAAP,GAAejB,WAAf;AACAe,IAAAA,MAAM,CAACG,MAAP,GAAgBf,YAAhB;AACA,SAAKS,QAAL,GAAgB,IAAId,QAAJ,CAAaiB,MAAM,CAACI,UAAP,CAAkB,IAAlB,CAAb,CAAhB;AACA,SAAKP,QAAL,CAAcQ,OAAd,CAAsBL,MAAM,CAACE,KAA7B,EAAoCF,MAAM,CAACG,MAA3C;AACArB,IAAAA,gBAAgB,CAAC,KAAKe,QAAN,CAAhB;AACA,SAAKA,QAAL,CAAcS,QAAd;AACD;;AAEDC,EAAAA,eAAe,CAAEC,KAAF,EAASC,IAAT,EAAe;AAC5B,QAAI,KAAKZ,QAAT,EAAmB;AACjB,WAAKA,QAAL,CAAcU,eAAd,CAA8BE,IAA9B,EAAoCD,KAAK,CAACE,OAA1C,EAAmDF,KAAK,CAACG,OAAzD;AACD;AACF;;AAEDpB,EAAAA,MAAM,GAAG;AACP,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AACE,MAAA,GAAG,EAAE,KAAKI,SADZ,CAEE;AAFF;AAGE,MAAA,WAAW,EAAGa,KAAD,IAAW,KAAKD,eAAL,CAAqBC,KAArB,EAA4B3B,cAAc,CAAC+B,KAA3C,CAH1B;AAIE,MAAA,WAAW,EAAGJ,KAAD,IAAW,KAAKD,eAAL,CAAqBC,KAArB,EAA4B3B,cAAc,CAACgC,IAA3C,CAJ1B;AAKE,MAAA,YAAY,EAAGL,KAAD,IAAW,KAAKD,eAAL,CAAqBC,KAArB,EAA4B3B,cAAc,CAACiC,OAA3C,CAL3B;AAME,MAAA,SAAS,EAAGN,KAAD,IAAW,KAAKD,eAAL,CAAqBC,KAArB,EAA4B3B,cAAc,CAACiC,OAA3C,CANxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF;AAYD;;AApCqC;;AAwCxC,eAAezB,GAAf","sourcesContent":["import React from 'react';\nimport './App.css';\n\nimport { userEventTypes, makeTestingNodes } from './modules/PatchbayUtils'\nimport { Patchbay } from './modules/Patchbay'\n\n// TODO: get screen values from React-Native methods when on mobile\nconst screenTestScaler = 0.8;\nconst canvasWidth = Math.floor(736 * screenTestScaler);\nconst canvasHeight = Math.floor(414 * screenTestScaler);\n\n\nclass App extends React.Component {\n  render() {\n    return <div>\n      <Animation></Animation>\n    </div>;\n  }\n}\n\nclass Animation extends React.Component {\n  constructor (props) {\n    super(props);\n    this.canvasRef = React.createRef();\n    this.patchbay = undefined;\n  }\n\n  componentDidMount () {\n    const canvas = this.canvasRef.current;\n    canvas.width = canvasWidth;\n    canvas.height = canvasHeight;\n    this.patchbay = new Patchbay(canvas.getContext('2d'));\n    this.patchbay.setSize(canvas.width, canvas.height);\n    makeTestingNodes(this.patchbay);\n    this.patchbay.drawLoop();\n  }\n\n  handleUserEvent (event, type) {\n    if (this.patchbay) {\n      this.patchbay.handleUserEvent(type, event.clientX, event.clientY);\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <canvas\n          ref={this.canvasRef}\n          // TODO: these events will need to change for when in React-Native\n          onMouseDown={(event) => this.handleUserEvent(event, userEventTypes.touch)}\n          onMouseMove={(event) => this.handleUserEvent(event, userEventTypes.move)}\n          onMouseLeave={(event) => this.handleUserEvent(event, userEventTypes.release)}\n          onMouseUp={(event) => this.handleUserEvent(event, userEventTypes.release)}\n        />\n      </div>\n    );\n  }\n}\n\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}