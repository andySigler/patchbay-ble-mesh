{"ast":null,"code":"var _jsxFileName = \"/Users/andy/Documents/patchbay-react/patchbay-react/src/App.js\";\nimport React from 'react';\nimport './App.css';\n\nclass App extends React.Component {\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 6\n      },\n      __self: this\n    }, React.createElement(Animation, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 7\n      },\n      __self: this\n    }));\n  }\n\n}\n\nclass Animation extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      angle: 0\n    };\n    this.updateAnimationState = this.updateAnimationState.bind(this);\n  }\n\n  componentDidMount() {\n    this.rAF = requestAnimationFrame(this.updateAnimationState);\n  }\n\n  updateAnimationState() {\n    this.setState(prevState => ({\n      angle: prevState.angle + 1\n    }));\n    this.rAF = requestAnimationFrame(this.updateAnimationState);\n  }\n\n  componentWillUnmount() {\n    cancelAnimationFrame(this.rAF);\n  }\n\n  render() {\n    return React.createElement(Canvas, {\n      angle: this.state.angle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33\n      },\n      __self: this\n    });\n  }\n\n}\n\nclass Canvas extends React.Component {\n  constructor(props) {\n    super(props);\n    this.saveContext = this.saveContext.bind(this);\n  }\n\n  saveContext(ctx) {\n    this.ctx = ctx;\n  }\n\n  componentDidUpdate() {\n    // Draws a square in the middle of the canvas rotated\n    // around the centre by this.props.angle\n    const angle = this.props.angle;\n    const width = this.ctx.canvas.width;\n    const height = this.ctx.canvas.height;\n    this.ctx.save();\n    this.ctx.beginPath();\n    this.ctx.clearRect(0, 0, width, height);\n    this.ctx.translate(width / 2, height / 2);\n    this.ctx.rotate(angle * Math.PI / 180);\n    this.ctx.fillStyle = '#4397AC';\n    this.ctx.fillRect(-width / 4, -height / 4, width / 2, height / 2);\n    this.ctx.restore();\n  }\n\n  render() {\n    return React.createElement(PureCanvas, {\n      contextRef: this.saveContext,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    });\n  }\n\n}\n\nclass PureCanvas extends React.Component {\n  shouldComponentUpdate() {\n    return false;\n  }\n\n  render() {\n    return React.createElement(\"canvas\", {\n      width: \"300\",\n      height: \"300\",\n      ref: node => node ? this.props.contextRef(node.getContext('2d')) : null,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    });\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/andy/Documents/patchbay-react/patchbay-react/src/App.js"],"names":["React","App","Component","render","Animation","constructor","props","state","angle","updateAnimationState","bind","componentDidMount","rAF","requestAnimationFrame","setState","prevState","componentWillUnmount","cancelAnimationFrame","Canvas","saveContext","ctx","componentDidUpdate","width","canvas","height","save","beginPath","clearRect","translate","rotate","Math","PI","fillStyle","fillRect","restore","PureCanvas","shouldComponentUpdate","node","contextRef","getContext"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './App.css';\n\nclass App extends React.Component {\n  render() {\n    return <div>\n      <Animation></Animation>\n    </div>;\n  }\n}\n\nclass Animation extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { angle: 0 };\n    this.updateAnimationState = this.updateAnimationState.bind(this);\n  }\n\n  componentDidMount() {\n    this.rAF = requestAnimationFrame(this.updateAnimationState);\n  }\n\n  updateAnimationState() {\n    this.setState(prevState => ({ angle: prevState.angle + 1 }));\n    this.rAF = requestAnimationFrame(this.updateAnimationState);\n  }\n\n  componentWillUnmount() {\n    cancelAnimationFrame(this.rAF);\n  }\n\n  render() {\n    return <Canvas angle={this.state.angle} />\n  }\n}\n\nclass Canvas extends React.Component {\n  constructor(props) {\n    super(props);\n    this.saveContext = this.saveContext.bind(this);\n  }\n\n  saveContext(ctx) {\n    this.ctx = ctx;\n  }\n\n  componentDidUpdate() {\n    // Draws a square in the middle of the canvas rotated\n    // around the centre by this.props.angle\n    const {angle} = this.props;\n    const width = this.ctx.canvas.width;\n    const height = this.ctx.canvas.height;\n    this.ctx.save();\n    this.ctx.beginPath();\n    this.ctx.clearRect(0, 0, width, height);\n    this.ctx.translate(width/2, height/2 );\n    this.ctx.rotate(angle * Math.PI / 180);\n    this.ctx.fillStyle = '#4397AC';\n    this.ctx.fillRect(-width/4, -height/4, width/2, height/2);\n    this.ctx.restore();\n  }\n\n  render() {\n    return <PureCanvas contextRef={this.saveContext}></PureCanvas>;\n  }\n}\n\nclass PureCanvas extends React.Component {\n  shouldComponentUpdate() { return false; }\n\n  render() {\n    return (\n      <canvas width=\"300\" height=\"300\"\n        ref={node => node ? this.props.contextRef(node.getContext('2d')) : null}\n      />\n    )\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}