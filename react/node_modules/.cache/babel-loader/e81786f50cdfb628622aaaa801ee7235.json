{"ast":null,"code":"import * as utils from './DrawUtils';\nimport { AppParams } from './AppParams';\nimport { Connection } from './Connection';\nimport { Finger } from './Finger';\nimport { Circle } from './Circle';\nconst userEventTypes = {\n  touch: 'touch',\n  move: 'move',\n  release: 'release'\n};\nconst patchbayDefaults = {\n  tempThickness: 0.1,\n  screenPercentage: 0.25,\n  touchCircleThicknessScaler: 0.01,\n  touchedLineMaxWidth: 4,\n  touchedLineMinWidth: 2,\n  touchedTipPreScaler: 1.25,\n  touchedTipPostScaler: 0.1,\n  hoveredCircleWidthScaler: 0.1,\n  touchCircleRadiusScaler: 0.1\n};\n\nclass Patchbay {\n  constructor(context) {\n    this.params = new AppParams(context);\n    this.params.inCircle = new Circle(this.params, this.params.inType, patchbayDefaults.screenPercentage, patchbayDefaults.tempThickness);\n    this.params.outCircle = new Circle(this.params, this.params.outType, patchbayDefaults.screenPercentage, patchbayDefaults.tempThickness);\n    this.finger = new Finger(this.params, (inPort, outPort) => this.params.createConnection(inPort, outPort), conn => this.params.deleteConnection(conn));\n    this.reqAnimFrame = undefined;\n  }\n\n  drawLoop() {\n    if (this.reqAnimFrame) {\n      cancelAnimationFrame(this.reqAnimFrame);\n      this.reqAnimFrame = undefined;\n    }\n\n    this.finger.update();\n    this.params.outCircle.update();\n    this.params.inCircle.update();\n\n    for (let i in this.params.connections) {\n      this.params.connections[i].update();\n    }\n\n    this.params.context.save();\n    this.clearCanvas();\n    this.params.outCircle.drawArcs();\n    this.params.inCircle.drawArcs();\n    this.params.outCircle.drawNames();\n    this.params.inCircle.drawNames();\n    this.params.outCircle.drawPorts();\n    this.params.inCircle.drawPorts();\n\n    for (let i in this.params.connections) {\n      this.params.connections[i].draw();\n    }\n\n    const circleRadius = this.params.screenSize * patchbayDefaults.touchCircleRadiusScaler;\n    const circleThickness = this.params.screenSize * patchbayDefaults.touchCircleThicknessScaler;\n    this.drawTouchLine();\n    this.drawTouchedPort(circleRadius, circleThickness);\n    this.drawHoveredPort(circleRadius, circleThickness);\n    this.params.context.restore();\n    this.reqAnimFrame = requestAnimationFrame(() => this.drawLoop());\n  }\n\n  drawTouchedPort(circleRadius, circleThickness) {\n    if (!this.params.touchedPort) {\n      return;\n    }\n\n    this.params.context.save();\n    utils.drawArc(this.params.context, this.params.touchedPort.x, this.params.touchedPort.y, circleRadius, 0, utils.PI2, circleThickness, utils.colors.white(), undefined);\n    this.params.context.restore();\n  }\n\n  drawTouchLine() {\n    if (!this.params.touchedPort) {\n      return;\n    }\n\n    let touchedLineWidth = Math.sin(this.params.touchedPort.wobbleCounter);\n    touchedLineWidth = (touchedLineWidth + 1) / 2; // map to 0-1\n\n    touchedLineWidth *= patchbayDefaults.touchedLineMaxWidth - patchbayDefaults.touchedLineMinWidth;\n    touchedLineWidth += patchbayDefaults.touchedLineMinWidth;\n    this.params.context.save();\n    utils.drawLine(this.params.context, this.params.touchedPort.x, this.params.touchedPort.y, this.finger.x, this.finger.y, touchedLineWidth, utils.colors.green());\n    this.params.context.restore(); // then two smaller filled in circles to cover the tips of the line\n\n    this.params.context.save();\n    utils.drawArc(this.params.context, this.params.touchedPort.x, this.params.touchedPort.y, touchedLineWidth * 2, 0, utils.PI2, 0, undefined, utils.colors.white());\n    utils.drawArc(this.params.context, this.finger.x, this.finger.y, touchedLineWidth * 2, 0, utils.PI2, 0, undefined, utils.colors.white());\n    this.params.context.restore();\n  }\n\n  drawHoveredPort(circleRadius, circleThickness) {\n    if (!this.params.hoveredPort) {\n      return;\n    }\n\n    this.params.context.save();\n    utils.drawArc(this.params.context, this.params.hoveredPort.x, this.params.hoveredPort.y, circleRadius, 0, utils.PI2, circleThickness, utils.colors.green(), undefined);\n    this.params.context.restore();\n  }\n\n  setSize(width, height) {\n    this.params.width = width;\n    this.params.height = height;\n  }\n\n  clearCanvas() {\n    this.params.context.fillStyle = utils.colors.background();\n    this.params.context.fillRect(0, 0, this.params.width, this.params.height);\n  }\n\n  eraseNodeFromConnections(id) {\n    for (let n in this.params.connections) {\n      const conn = this.params.connections[n];\n\n      if (conn.outPort.parent.id === id || conn.inPort.parent.id === id) {\n        this.params.deleteConnection(conn);\n      }\n    }\n  }\n\n  handleUserEvent(type, x, y) {\n    if (type === userEventTypes.touch) {\n      const justTouched = true;\n      this.finger.moveEvent(x, y, justTouched);\n      this.finger.touchEvent();\n    } else if (type === userEventTypes.move) {\n      const justTouched = false;\n      this.finger.moveEvent(x, y, justTouched);\n    } else if (type === userEventTypes.release) {\n      this.finger.releaseEvent(x, y);\n    }\n  }\n\n}\n\nexport { Patchbay, userEventTypes };","map":{"version":3,"sources":["/Users/andy/Documents/patchbay-react/patchbay-react/src/modules/Patchbay.js"],"names":["utils","AppParams","Connection","Finger","Circle","userEventTypes","touch","move","release","patchbayDefaults","tempThickness","screenPercentage","touchCircleThicknessScaler","touchedLineMaxWidth","touchedLineMinWidth","touchedTipPreScaler","touchedTipPostScaler","hoveredCircleWidthScaler","touchCircleRadiusScaler","Patchbay","constructor","context","params","inCircle","inType","outCircle","outType","finger","inPort","outPort","createConnection","conn","deleteConnection","reqAnimFrame","undefined","drawLoop","cancelAnimationFrame","update","i","connections","save","clearCanvas","drawArcs","drawNames","drawPorts","draw","circleRadius","screenSize","circleThickness","drawTouchLine","drawTouchedPort","drawHoveredPort","restore","requestAnimationFrame","touchedPort","drawArc","x","y","PI2","colors","white","touchedLineWidth","Math","sin","wobbleCounter","drawLine","green","hoveredPort","setSize","width","height","fillStyle","background","fillRect","eraseNodeFromConnections","id","n","parent","handleUserEvent","type","justTouched","moveEvent","touchEvent","releaseEvent"],"mappings":"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","sourcesContent":["import * as utils from './DrawUtils'\nimport { AppParams } from './AppParams'\nimport { Connection } from './Connection'\nimport { Finger } from './Finger'\nimport { Circle } from './Circle'\n\n\nconst userEventTypes = {\n  touch: 'touch',\n  move: 'move',\n  release: 'release'\n};\n\n\nconst patchbayDefaults = {\n  tempThickness: 0.1,\n  screenPercentage: 0.25,\n  touchCircleThicknessScaler: 0.01,\n  touchedLineMaxWidth: 4,\n  touchedLineMinWidth: 2,\n  touchedTipPreScaler: 1.25,\n  touchedTipPostScaler: 0.1,\n  hoveredCircleWidthScaler: 0.1,\n  touchCircleRadiusScaler: 0.1\n};\n\nclass Patchbay {\n  constructor (context) {\n    this.params = new AppParams(context);\n    this.params.inCircle = new Circle(\n      this.params,\n      this.params.inType,\n      patchbayDefaults.screenPercentage,\n      patchbayDefaults.tempThickness\n    );\n    this.params.outCircle = new Circle(\n      this.params,\n      this.params.outType,\n      patchbayDefaults.screenPercentage,\n      patchbayDefaults.tempThickness\n    );\n    this.finger = new Finger(\n      this.params,\n      (inPort, outPort) => this.params.createConnection(inPort, outPort),\n      (conn) => this.params.deleteConnection(conn)\n    );\n    this.reqAnimFrame = undefined;\n  }\n\n  drawLoop () {\n    if (this.reqAnimFrame) {\n      cancelAnimationFrame(this.reqAnimFrame);\n      this.reqAnimFrame = undefined;\n    }\n    this.finger.update();\n    this.params.outCircle.update();\n    this.params.inCircle.update();\n    for(let i in this.params.connections){\n      this.params.connections[i].update();\n    }\n\n    this.params.context.save();\n    this.clearCanvas();\n\n    this.params.outCircle.drawArcs();\n    this.params.inCircle.drawArcs();\n\n    this.params.outCircle.drawNames();\n    this.params.inCircle.drawNames();\n\n    this.params.outCircle.drawPorts();\n    this.params.inCircle.drawPorts();\n\n    for(let i in this.params.connections){\n      this.params.connections[i].draw();\n    }\n\n    const circleRadius = this.params.screenSize * patchbayDefaults.touchCircleRadiusScaler;\n    const circleThickness = this.params.screenSize * patchbayDefaults.touchCircleThicknessScaler;\n    this.drawTouchLine();\n    this.drawTouchedPort(circleRadius, circleThickness);\n    this.drawHoveredPort(circleRadius, circleThickness);\n\n    this.params.context.restore();\n    this.reqAnimFrame = requestAnimationFrame(() => this.drawLoop());\n  }\n\n  drawTouchedPort (circleRadius, circleThickness) {\n    if (!this.params.touchedPort) {\n      return;\n    }\n    this.params.context.save();\n    utils.drawArc(\n      this.params.context,\n      this.params.touchedPort.x, this.params.touchedPort.y,\n      circleRadius, 0, utils.PI2, circleThickness,\n      utils.colors.white(), undefined\n    );\n    this.params.context.restore();\n  }\n\n  drawTouchLine () {\n    if (!this.params.touchedPort) {\n      return;\n    }\n    let touchedLineWidth = Math.sin(this.params.touchedPort.wobbleCounter);\n    touchedLineWidth = (touchedLineWidth + 1) / 2; // map to 0-1\n    touchedLineWidth *= patchbayDefaults.touchedLineMaxWidth - patchbayDefaults.touchedLineMinWidth;\n    touchedLineWidth += patchbayDefaults.touchedLineMinWidth;\n    this.params.context.save();\n    utils.drawLine(\n      this.params.context,\n      this.params.touchedPort.x, this.params.touchedPort.y,\n      this.finger.x, this.finger.y,\n      touchedLineWidth, utils.colors.green()\n    );\n    this.params.context.restore();\n    // then two smaller filled in circles to cover the tips of the line\n    this.params.context.save();\n    utils.drawArc(\n      this.params.context,\n      this.params.touchedPort.x, this.params.touchedPort.y,\n      touchedLineWidth * 2, 0, utils.PI2, 0,\n      undefined, utils.colors.white()\n    );\n    utils.drawArc(\n      this.params.context,\n      this.finger.x, this.finger.y,\n      touchedLineWidth * 2, 0, utils.PI2, 0,\n      undefined, utils.colors.white()\n    );\n    this.params.context.restore();\n  }\n\n  drawHoveredPort (circleRadius, circleThickness) {\n    if (!this.params.hoveredPort) {\n      return;\n    }\n    this.params.context.save();\n    utils.drawArc(\n      this.params.context,\n      this.params.hoveredPort.x, this.params.hoveredPort.y,\n      circleRadius, 0, utils.PI2, circleThickness,\n      utils.colors.green(), undefined\n    );\n    this.params.context.restore();\n  }\n\n  setSize (width, height) {\n    this.params.width = width;\n    this.params.height = height;\n  }\n\n  clearCanvas() {\n    this.params.context.fillStyle = utils.colors.background();\n    this.params.context.fillRect(0, 0, this.params.width, this.params.height);\n  }\n\n  eraseNodeFromConnections (id) {\n    for (let n in this.params.connections) {\n      const conn = this.params.connections[n];\n      if (conn.outPort.parent.id === id || conn.inPort.parent.id === id) {\n        this.params.deleteConnection(conn);\n      }\n    }\n  }\n\n  handleUserEvent (type, x, y) {\n    if (type === userEventTypes.touch) {\n      const justTouched = true;\n      this.finger.moveEvent(x, y, justTouched);\n      this.finger.touchEvent();\n    }\n    else if (type === userEventTypes.move) {\n      const justTouched = false;\n      this.finger.moveEvent(x, y, justTouched);\n    }\n    else if (type === userEventTypes.release) {\n      this.finger.releaseEvent(x, y);\n    }\n  }\n}\n\nexport { Patchbay, userEventTypes }\n"]},"metadata":{},"sourceType":"module"}