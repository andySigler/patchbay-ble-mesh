{"ast":null,"code":"import { inType } from './PatchbayUtils';\nconst appParamsDefaults = {\n  globalScalerHeightMultiplier: 1.2,\n  globalScalerMultiplier: 0.9,\n  circleCenterXOffsetScaler: 0.3,\n  circleCenterYOffsetScaler: 0.1\n};\n\nclass AppParams {\n  /*\n  Class for storing globally-used drawing params.\n  There should be only one (1) instance of this object in the application\n    and many instances can store a reference back to this single instance.\n  Then, when the screen dimensions are changed on the device, this instance\n    can update, and all objects holding a reference to is can use it's values\n  */\n  constructor(context) {\n    this._context = context;\n    this._width = 1;\n    this._height = 1;\n    this._middleX = 1;\n    this._middleY = 1;\n    this._screenSize = 1;\n    this._touchedPort = undefined;\n    this._hoveredPort = undefined;\n    this._deleteType = 'delete';\n    this._connections = {};\n    this._inCircle = undefined;\n    this._outCircle = undefined;\n  }\n\n  saveConnection(connection) {\n    this.deleteConnection(connection);\n    this._connections[connection.name] = connection;\n  }\n\n  deleteConnection(conn) {\n    this.deleteConnectionByName(conn.name);\n  }\n\n  deleteConnectionByName(name) {\n    if (this._connections[name]) {\n      delete this._connections[name];\n    }\n  }\n\n  getPort(parentID, portID, type) {\n    const circle = type === inType ? this.inCircle : this.outCircle;\n\n    for (let i = 0; i < circle.arcs.length; i++) {\n      if (circle.arcs[i].id === parentID) {\n        return circle.arcs[i].ports[portID];\n      }\n    }\n\n    return undefined;\n  } // GETTERS\n\n\n  get inCircle() {\n    return this._inCircle;\n  }\n\n  get outCircle() {\n    return this._outCircle;\n  }\n\n  get connections() {\n    return this._connections;\n  }\n\n  get deleteType() {\n    return this._deleteType;\n  }\n\n  get context() {\n    return this._context;\n  }\n\n  get width() {\n    return this._width;\n  }\n\n  get height() {\n    return this._height;\n  }\n\n  get middleX() {\n    return this._middleX;\n  }\n\n  get middleY() {\n    return this._middleY;\n  }\n\n  get screenSize() {\n    return this._screenSize;\n  }\n\n  get touchedPort() {\n    return this._touchedPort;\n  }\n\n  get hoveredPort() {\n    return this._hoveredPort;\n  } // SETTERS\n\n\n  set touchedPort(newPort) {\n    this._touchedPort = newPort;\n  }\n\n  set hoveredPort(newPort) {\n    this._hoveredPort = newPort;\n  }\n\n  set inCircle(circle) {\n    this._inCircle = circle;\n  }\n\n  set outCircle(circle) {\n    this._outCircle = circle;\n  }\n\n  set width(newVal) {\n    this._width = newVal;\n    this.updateScreenPositions();\n  }\n\n  set height(newVal) {\n    this._height = newVal;\n    this.updateScreenPositions();\n  }\n\n  updateScreenPositions() {\n    this._middleX = this._width / 2;\n    this._middleY = this._height / 2;\n    this._screenSize = Math.min(this._width, this._height * appParamsDefaults.globalScalerHeightMultiplier);\n    this._screenSize *= appParamsDefaults.globalScalerMultiplier;\n    const xOffset = this._width * appParamsDefaults.circleCenterXOffsetScaler;\n    const yOffset = this._height * appParamsDefaults.circleCenterYOffsetScaler;\n    this.inCircle.x = this._middleX - xOffset;\n    this.outCircle.x = this._middleX + xOffset;\n    this.inCircle.y = this._middleY - yOffset;\n    this.outCircle.y = this._middleY + yOffset;\n  }\n\n}\n\nexport { AppParams };","map":{"version":3,"sources":["/Users/andy/Documents/patchbay-react/patchbay-react/src/modules/AppParams.js"],"names":["inType","appParamsDefaults","globalScalerHeightMultiplier","globalScalerMultiplier","circleCenterXOffsetScaler","circleCenterYOffsetScaler","AppParams","constructor","context","_context","_width","_height","_middleX","_middleY","_screenSize","_touchedPort","undefined","_hoveredPort","_deleteType","_connections","_inCircle","_outCircle","saveConnection","connection","deleteConnection","name","conn","deleteConnectionByName","getPort","parentID","portID","type","circle","inCircle","outCircle","i","arcs","length","id","ports","connections","deleteType","width","height","middleX","middleY","screenSize","touchedPort","hoveredPort","newPort","newVal","updateScreenPositions","Math","min","xOffset","yOffset","x","y"],"mappings":"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","sourcesContent":["import { inType } from './PatchbayUtils'\n\nconst appParamsDefaults = {\n  globalScalerHeightMultiplier: 1.2,\n  globalScalerMultiplier: 0.9,\n  circleCenterXOffsetScaler: 0.3,\n  circleCenterYOffsetScaler: 0.1\n};\n\nclass AppParams {\n  /*\n  Class for storing globally-used drawing params.\n  There should be only one (1) instance of this object in the application\n    and many instances can store a reference back to this single instance.\n  Then, when the screen dimensions are changed on the device, this instance\n    can update, and all objects holding a reference to is can use it's values\n  */\n  constructor (context) {\n    this._context = context;\n    this._width = 1;\n    this._height = 1;\n    this._middleX = 1;\n    this._middleY = 1;\n    this._screenSize = 1;\n    this._touchedPort = undefined;\n    this._hoveredPort = undefined;\n    this._deleteType = 'delete';\n    this._connections = {};\n    this._inCircle = undefined;\n    this._outCircle = undefined;\n  }\n\n  saveConnection (connection) {\n    this.deleteConnection(connection);\n    this._connections[connection.name] = connection;\n  }\n\n  deleteConnection (conn) {\n    this.deleteConnectionByName(conn.name);\n  }\n\n  deleteConnectionByName (name) {\n    if (this._connections[name]) {\n      delete this._connections[name];\n    }\n  }\n\n  getPort (parentID, portID, type) {\n    const circle = type === inType ? this.inCircle : this.outCircle;\n    for (let i = 0; i < circle.arcs.length; i++) {\n      if (circle.arcs[i].id === parentID) {\n        return circle.arcs[i].ports[portID];\n      }\n    }\n    return undefined;\n  }\n\n  // GETTERS\n\n  get inCircle () { return this._inCircle; }\n\n  get outCircle () { return this._outCircle; }\n\n  get connections () { return this._connections; }\n\n  get deleteType () { return this._deleteType; }\n\n  get context () { return this._context; }\n\n  get width () { return this._width; }\n\n  get height () { return this._height; }\n\n  get middleX () { return this._middleX; }\n\n  get middleY () { return this._middleY; }\n\n  get screenSize () { return this._screenSize; }\n\n  get touchedPort () { return this._touchedPort; }\n\n  get hoveredPort () { return this._hoveredPort; }\n\n  // SETTERS\n\n  set touchedPort (newPort) { this._touchedPort = newPort; }\n\n  set hoveredPort (newPort) { this._hoveredPort = newPort; }\n\n  set inCircle (circle) { this._inCircle = circle; }\n\n  set outCircle (circle) { this._outCircle = circle; }\n\n  set width (newVal) {\n    this._width = newVal;\n    this.updateScreenPositions();\n  }\n\n  set height (newVal) {\n    this._height = newVal;\n    this.updateScreenPositions();\n  }\n\n  updateScreenPositions () {\n    this._middleX = this._width / 2;\n    this._middleY = this._height / 2;\n    this._screenSize = Math.min(\n      this._width,\n      this._height * appParamsDefaults.globalScalerHeightMultiplier\n    );\n    this._screenSize *= appParamsDefaults.globalScalerMultiplier;\n    const xOffset = this._width * appParamsDefaults.circleCenterXOffsetScaler;\n    const yOffset = this._height * appParamsDefaults.circleCenterYOffsetScaler;\n    this.inCircle.x = this._middleX - xOffset;\n    this.outCircle.x = this._middleX + xOffset;\n    this.inCircle.y = this._middleY - yOffset;\n    this.outCircle.y = this._middleY + yOffset;\n  }\n}\n\nexport { AppParams }\n"]},"metadata":{},"sourceType":"module"}